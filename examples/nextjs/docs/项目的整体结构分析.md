## 项目整体结构分析

### 🎯 项目概述
这是一个 **LiFi Widget** 的 Next.js 示例项目，主要用于展示如何在 Next.js 应用中集成 LiFi 跨链桥接小组件。LiFi 是一个跨链桥接协议，这个项目展示了不同的集成方式。

## 📁 目录结构详解

### **1. 核心配置文件**
- `package.json` - 项目依赖管理，主要依赖：
  - `@lifi/widget` ^3.27.6 - LiFi Widget 组件库
  - `@lifi/sdk` ^3.10.1 - LiFi SDK
  - `next` ^15.5.0 - Next.js 框架
  - `@mui/material-nextjs` - Material UI Next.js 集成

- `next.config.js` - Next.js 配置，包含 webpack 配置用于解决 Node.js 模块兼容性
- `tsconfig.json` - TypeScript 配置

### **2. App Router 结构 (app/)**
- `layout.tsx` - 根布局，使用 Material UI 的 AppRouterCacheProvider
- `page.tsx` - 首页，展示 Widget 组件和事件监听
- `globals.css` - 全局样式

### **3. Pages Router 结构 (pages/)**
- `_app.tsx` / `_document.tsx` - Pages Router 的应用配置
- `pages-example.tsx` - Pages Router 中使用 Widget 的示例
- `dynamic-import.tsx` - 使用 Next.js dynamic 导入的示例

### **4. 组件库 (components/)**
- `Widget.tsx` - 主要的 LiFi Widget 组件（App Router 版本）
- `PagesWidget.tsx` - Pages Router 版本的 Widget 组件
- `ClientOnly.tsx` - 客户端渲染包装器，解决 SSR 问题
- `WidgetEvents.tsx` - Widget 事件监听器，用于处理路由执行事件

### **5. 自定义 Hooks (hooks/)**
- `useHydrated.ts` - 检测客户端水合状态的 Hook

## 🔧 技术特点

### **1. 双路由支持**
项目同时支持 Next.js 13+ 的 App Router 和传统的 Pages Router：
- App Router: 使用 `'use client'` 指令和 `ClientOnly` 组件
- Pages Router: 使用 `dynamic` 导入禁用 SSR

### **2. SSR 兼容性处理**
通过多种方式解决 Widget 的 SSR 兼容性问题：
- `ClientOnly` 组件 + `useHydrated` Hook
- Next.js `dynamic` 导入 + `ssr: false`
- 提供骨架屏组件 `WidgetSkeleton`

### **3. 事件系统**
通过 `WidgetEvents` 组件监听 LiFi Widget 的各种事件：
- 路由执行开始/更新/完成/失败
- 高价值损失警告

## 🌐 演示页面

项目提供了三个不同的演示页面：

1. **http://localhost:3000/** - App Router + ClientOnly 方式
2. **http://localhost:3000/pages-example** - Pages Router + ClientOnly 方式  
3. **http://localhost:3000/dynamic-import** - Dynamic 导入方式

## 🎨 UI 配置
Widget 使用了统一的主题配置：
- 浅色主题 (`appearance: 'light'`)
- 圆角边框设计 (16px 圆角，灰色边框)
- Material UI 集成支持

这个项目是一个很好的学习资源，展示了如何在现代 Next.js 应用中正确集成第三方 Widget 组件，特别是处理 SSR/CSR 兼容性问题的最佳实践。
