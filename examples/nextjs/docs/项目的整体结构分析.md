## é¡¹ç›®æ•´ä½“ç»“æ„åˆ†æ

### ğŸ¯ é¡¹ç›®æ¦‚è¿°
è¿™æ˜¯ä¸€ä¸ª **LiFi Widget** çš„ Next.js ç¤ºä¾‹é¡¹ç›®ï¼Œä¸»è¦ç”¨äºå±•ç¤ºå¦‚ä½•åœ¨ Next.js åº”ç”¨ä¸­é›†æˆ LiFi è·¨é“¾æ¡¥æ¥å°ç»„ä»¶ã€‚LiFi æ˜¯ä¸€ä¸ªè·¨é“¾æ¡¥æ¥åè®®ï¼Œè¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ä¸åŒçš„é›†æˆæ–¹å¼ã€‚

## ğŸ“ ç›®å½•ç»“æ„è¯¦è§£

### **1. æ ¸å¿ƒé…ç½®æ–‡ä»¶**
- `package.json` - é¡¹ç›®ä¾èµ–ç®¡ç†ï¼Œä¸»è¦ä¾èµ–ï¼š
  - `@lifi/widget` ^3.27.6 - LiFi Widget ç»„ä»¶åº“
  - `@lifi/sdk` ^3.10.1 - LiFi SDK
  - `next` ^15.5.0 - Next.js æ¡†æ¶
  - `@mui/material-nextjs` - Material UI Next.js é›†æˆ

- `next.config.js` - Next.js é…ç½®ï¼ŒåŒ…å« webpack é…ç½®ç”¨äºè§£å†³ Node.js æ¨¡å—å…¼å®¹æ€§
- `tsconfig.json` - TypeScript é…ç½®

### **2. App Router ç»“æ„ (app/)**
- `layout.tsx` - æ ¹å¸ƒå±€ï¼Œä½¿ç”¨ Material UI çš„ AppRouterCacheProvider
- `page.tsx` - é¦–é¡µï¼Œå±•ç¤º Widget ç»„ä»¶å’Œäº‹ä»¶ç›‘å¬
- `globals.css` - å…¨å±€æ ·å¼

### **3. Pages Router ç»“æ„ (pages/)**
- `_app.tsx` / `_document.tsx` - Pages Router çš„åº”ç”¨é…ç½®
- `pages-example.tsx` - Pages Router ä¸­ä½¿ç”¨ Widget çš„ç¤ºä¾‹
- `dynamic-import.tsx` - ä½¿ç”¨ Next.js dynamic å¯¼å…¥çš„ç¤ºä¾‹

### **4. ç»„ä»¶åº“ (components/)**
- `Widget.tsx` - ä¸»è¦çš„ LiFi Widget ç»„ä»¶ï¼ˆApp Router ç‰ˆæœ¬ï¼‰
- `PagesWidget.tsx` - Pages Router ç‰ˆæœ¬çš„ Widget ç»„ä»¶
- `ClientOnly.tsx` - å®¢æˆ·ç«¯æ¸²æŸ“åŒ…è£…å™¨ï¼Œè§£å†³ SSR é—®é¢˜
- `WidgetEvents.tsx` - Widget äº‹ä»¶ç›‘å¬å™¨ï¼Œç”¨äºå¤„ç†è·¯ç”±æ‰§è¡Œäº‹ä»¶

### **5. è‡ªå®šä¹‰ Hooks (hooks/)**
- `useHydrated.ts` - æ£€æµ‹å®¢æˆ·ç«¯æ°´åˆçŠ¶æ€çš„ Hook

## ğŸ”§ æŠ€æœ¯ç‰¹ç‚¹

### **1. åŒè·¯ç”±æ”¯æŒ**
é¡¹ç›®åŒæ—¶æ”¯æŒ Next.js 13+ çš„ App Router å’Œä¼ ç»Ÿçš„ Pages Routerï¼š
- App Router: ä½¿ç”¨ `'use client'` æŒ‡ä»¤å’Œ `ClientOnly` ç»„ä»¶
- Pages Router: ä½¿ç”¨ `dynamic` å¯¼å…¥ç¦ç”¨ SSR

### **2. SSR å…¼å®¹æ€§å¤„ç†**
é€šè¿‡å¤šç§æ–¹å¼è§£å†³ Widget çš„ SSR å…¼å®¹æ€§é—®é¢˜ï¼š
- `ClientOnly` ç»„ä»¶ + `useHydrated` Hook
- Next.js `dynamic` å¯¼å…¥ + `ssr: false`
- æä¾›éª¨æ¶å±ç»„ä»¶ `WidgetSkeleton`

### **3. äº‹ä»¶ç³»ç»Ÿ**
é€šè¿‡ `WidgetEvents` ç»„ä»¶ç›‘å¬ LiFi Widget çš„å„ç§äº‹ä»¶ï¼š
- è·¯ç”±æ‰§è¡Œå¼€å§‹/æ›´æ–°/å®Œæˆ/å¤±è´¥
- é«˜ä»·å€¼æŸå¤±è­¦å‘Š

## ğŸŒ æ¼”ç¤ºé¡µé¢

é¡¹ç›®æä¾›äº†ä¸‰ä¸ªä¸åŒçš„æ¼”ç¤ºé¡µé¢ï¼š

1. **http://localhost:3000/** - App Router + ClientOnly æ–¹å¼
2. **http://localhost:3000/pages-example** - Pages Router + ClientOnly æ–¹å¼  
3. **http://localhost:3000/dynamic-import** - Dynamic å¯¼å…¥æ–¹å¼

## ğŸ¨ UI é…ç½®
Widget ä½¿ç”¨äº†ç»Ÿä¸€çš„ä¸»é¢˜é…ç½®ï¼š
- æµ…è‰²ä¸»é¢˜ (`appearance: 'light'`)
- åœ†è§’è¾¹æ¡†è®¾è®¡ (16px åœ†è§’ï¼Œç°è‰²è¾¹æ¡†)
- Material UI é›†æˆæ”¯æŒ

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ èµ„æºï¼Œå±•ç¤ºäº†å¦‚ä½•åœ¨ç°ä»£ Next.js åº”ç”¨ä¸­æ­£ç¡®é›†æˆç¬¬ä¸‰æ–¹ Widget ç»„ä»¶ï¼Œç‰¹åˆ«æ˜¯å¤„ç† SSR/CSR å…¼å®¹æ€§é—®é¢˜çš„æœ€ä½³å®è·µã€‚
